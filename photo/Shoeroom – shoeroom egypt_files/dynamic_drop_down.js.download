
NeighborhoodToCompoundListMapping = {

  "Alex Desert Rd.": {
    "Select Compound": " ",
    "Cairo West": "Cairo West",
    Newgiza: "Newgiza",
    "Other": " "
  },

  Alexandria: {
    "Select Compound": " ",
    Jewar: "Jewar",
    "Other": " "
  },
  "الاسكندريه": {
    "اختار المجمع": " ",
    Jewar: "Jewar",
    "خيار اخر": " "
  },

  Marinah: {
    "Select Compound": " ",
    Amwaj: "Amwaj",
    "Bo Islands": "Bo Islands",
    "El Masyaf": "El Masyaf",
    "Fouka Bay": "Fouka Bay",
    Gaia: "Gaia",
    "Hacienda Bay": "Hacienda Bay",
    Jefaira: "Jefaira",
    "La Vista Bay East": "La Vista Bay East",
    Marassi: "Marassi",
    "Mountain View Ras El Hikma": "Mountain View Ras El Hikma",
    Pali: "Pali",
    "Smeralda Bay": "Smeralda Bay",
    "White Bay": "White Bay",
    "White Sand ": "White Sand ",
    "Other": " "
  },

  "El Shorouk": {
    "Select Compound": " ",
    "El Patio 5 East": "El Patio 5 East",
    "Other": " "
  },
  "الشروق": {
    "اختار المجمع": " ",
    "El Patio 5 East": "El Patio 5 East",
    "خيار اخر": " "
  },

  Heliopolis: {
    "Select Compound": " ",
    "Go Heliopolis": "Go Heliopolis",
    "Taj City": "Taj City",
    "Other": " "
  },
  "هيليوبلس": {
    "اختار المجمع": " ",
    "Go Heliopolis": "Go Heliopolis",
    "Taj City": "Taj City",
    "خيار اخر": " "
  },

  Katamiah: {
    "Select Compound": " ",
    "Katameya Heights": "Katameya Heights",
    "Other": " "
  },
  "قطاميه": {
    "اختار المجمع": " ",
    "Katameya Heights": "Katameya Heights",
    "خيار اخر": " "
  },

  Mokatam: {
    "Select Compound": " ",
    "Uptown Cairo": "Uptown Cairo",
    "Other": " "
  },
  "المقطم": {
    "اختار المجمع": " ",
    "Uptown Cairo": "Uptown Cairo",
    "خيار اخر": " "
  },

  "New Cairo": {
    "Select Compound": " ",
    "5A The Waterway": "5A The Waterway",
    "90 Avenue": "90 Avenue",
    Akoya: "Akoya",
    Aria: "Aria",
    Azad: "Azad",
    Azzar: "Azzar",
    "Beta Greens": "Beta Greens",
    "Capital Gardens": "Capital Gardens",
    Dyar: "Dyar",
    Eastown: "Eastown",
    "Fifth Square": "Fifth Square",
    "Galleria Moon Valley": "Galleria Moon Valley",
    "Highland Park": "Highland Park",
    "Hyde Park": "Hyde Park",
    Jayd: "Jayd",
    "Katameya Dunes": "Katameya Dunes",
    "Katameya Gardens": "Katameya Gardens",
    "La Mirada": "La Mirada",
    "La Nuova Vista": "La Nuova Vista",
    "Lake View": "Lake View",
    "Lake View Residence": "Lake View Residence",
    "Layan Residence": "Layan Residence",
    Midtown: "Midtown",
    Mivida: "Mivida",
    "Mountain View 2": "Mountain View 2",
    "Mountain View 3": "Mountain View 3",
    "Mountain View Hyde Park": "Mountain View Hyde Park",
    "Mountain View Icity": "Mountain View Icity ",
    Neopolis: "Neopolis",
    "Oriana Villas": "Oriana Villas",
    "Palm Hills Katameya": "Palm Hills Katameya",
    "Palm Hills Katameya Extension": "Palm Hills Katameya Extension",
    "Palm Hills New Cairo": "Palm Hills New Cairo",
    "Porto Cairo": "Porto Cairo",
    "Porto New Cairo": "Porto New Cairo",
    Promenade: "Promenade",
    "Regents Park": "Regents Park",
    Riviera: "Riviera",
    "Rock Vera": "Rock Vera",
    Sarai: "Sarai",
    "Stone Park": "Stone Park",
    "Stone Residence": "Stone Residence",
    "Swan Lake Residences": "Swan Lake Residences",
    "The Address East": "The Address East",
    "The Icon Residence": "The Icon Residence",
    "The Marq": "The Marq",
    "The Square": "The Square",
    "Trio Gardens": "Trio Gardens",
    "Trio Villas": "Trio Villas",
    "Village Gardens Katameya": "Village Gardens Katameya",
    Villette: "Villette",
    "West Golf": "West Golf ",
    "Other": " "
  },
  "القاهره الجديده": {
    "اختار المجمع": " ",
    "5A The Waterway": "5A The Waterway",
    "90 Avenue": "90 Avenue",
    Akoya: "Akoya",
    Aria: "Aria",
    Azad: "Azad",
    Azzar: "Azzar",
    "Beta Greens": "Beta Greens",
    "Capital Gardens": "Capital Gardens",
    Dyar: "Dyar",
    Eastown: "Eastown",
    "Fifth Square": "Fifth Square",
    "Galleria Moon Valley": "Galleria Moon Valley",
    "Highland Park": "Highland Park",
    "Hyde Park": "Hyde Park",
    Jayd: "Jayd",
    "Katameya Dunes": "Katameya Dunes",
    "Katameya Gardens": "Katameya Gardens",
    "La Mirada": "La Mirada",
    "La Nuova Vista": "La Nuova Vista",
    "Lake View": "Lake View",
    "Lake View Residence": "Lake View Residence",
    "Layan Residence": "Layan Residence",
    Midtown: "Midtown",
    Mivida: "Mivida",
    "Mountain View 2": "Mountain View 2",
    "Mountain View 3": "Mountain View 3",
    "Mountain View Hyde Park": "Mountain View Hyde Park",
    "Mountain View Icity": "Mountain View Icity ",
    Neopolis: "Neopolis",
    "Oriana Villas": "Oriana Villas",
    "Palm Hills Katameya": "Palm Hills Katameya",
    "Palm Hills Katameya Extension": "Palm Hills Katameya Extension",
    "Palm Hills New Cairo": "Palm Hills New Cairo",
    "Porto Cairo": "Porto Cairo",
    "Porto New Cairo": "Porto New Cairo",
    Promenade: "Promenade",
    "Regents Park": "Regents Park",
    Riviera: "Riviera",
    "Rock Vera": "Rock Vera",
    Sarai: "Sarai",
    "Stone Park": "Stone Park",
    "Stone Residence": "Stone Residence",
    "Swan Lake Residences": "Swan Lake Residences",
    "The Address East": "The Address East",
    "The Icon Residence": "The Icon Residence",
    "The Marq": "The Marq",
    "The Square": "The Square",
    "Trio Gardens": "Trio Gardens",
    "Trio Villas": "Trio Villas",
    "Village Gardens Katameya": "Village Gardens Katameya",
    Villette: "Villette",
    "West Golf": "West Golf ",
    "خيار اخر": " "
  },

  "6th of Oct": {
    "Select Compound": " ",
    "Aeon Courtyards": "Aeon Courtyards",
    "Al Maqsad": "Al Maqsad",
    "Al Rabwa": "Al Rabwa",
    Allegria: "Allegria",
    Alma: "Alma",
    Atrio: "Atrio",
    Badya: "Badya",
    "Beta Greens October": "Beta Greens October",
    Brix: "Brix",
    "Cleopatra Square": "Cleopatra Square",
    "Diar Ii": "Diar Ii",
    "El Patio Zahraa": "El Patio Zahraa",
    "Emaar Cairo Gate": "Emaar Cairo Gate",
    Etapa: "Etapa",
    "Grand Heights": "Grand Heights",
    "Green 4": "Green 4",
    "Green 5": "Green 5",
    Hadaba: "Hadaba",
    "I City October": "I City October",
    Jedar: "Jedar",
    Jeera: "Jeera",
    Jewar: "Jewar",
    Joulz: "Joulz",
    Joya: "Joya",
    Karmell: "Karmell",
    Keeva: "Keeva",
    "Mountain View Chillout Park": "Mountain View Chillout Park",
    "New Giza": "New Giza",
    "O West": "O West",
    "Oak Park": "Oak Park",
    "October Park": "October Park",
    "October Plaza": "October Plaza",
    "Palm Hills October": "Palm Hills October",
    "Palm Parks": "Palm Parks",
    "Palm Valley": "Palm Valley",
    "Patio El Zahra": "Patio El Zahra",
    "Patio El Zahraa": "Patio El Zahraa",
    "Rock Eden": "Rock Eden",
    "Sodic Westown": "Sodic Westown",
    "Sun Capital": "Sun Capital",
    Tawny: "Tawny",
    "The Axis": "The Axis",
    "The Crown": "The Crown",
    "The Estates": "The Estates",
    Vye: "Vye",
    Westown: "Westown",
    "Wood Ville": "Wood Ville",
    "Zed Towers": "Zed Towers",
    "Other": " "
  },
  "السادس من إكتوبر": {
    "اختار المجمع": " ",
    "Aeon Courtyards": "Aeon Courtyards",
    "Al Maqsad": "Al Maqsad",
    "Al Rabwa": "Al Rabwa",
    Allegria: "Allegria",
    Alma: "Alma",
    Atrio: "Atrio",
    Badya: "Badya",
    "Beta Greens October": "Beta Greens October",
    Brix: "Brix",
    "Cleopatra Square": "Cleopatra Square",
    "Diar Ii": "Diar Ii",
    "El Patio Zahraa": "El Patio Zahraa",
    "Emaar Cairo Gate": "Emaar Cairo Gate",
    Etapa: "Etapa",
    "Grand Heights": "Grand Heights",
    "Green 4": "Green 4",
    "Green 5": "Green 5",
    Hadaba: "Hadaba",
    "I City October": "I City October",
    Jedar: "Jedar",
    Jeera: "Jeera",
    Jewar: "Jewar",
    Joulz: "Joulz",
    Joya: "Joya",
    Karmell: "Karmell",
    Keeva: "Keeva",
    "Mountain View Chillout Park": "Mountain View Chillout Park",
    "New Giza": "New Giza",
    "O West": "O West",
    "Oak Park": "Oak Park",
    "October Park": "October Park",
    "October Plaza": "October Plaza",
    "Palm Hills October": "Palm Hills October",
    "Palm Parks": "Palm Parks",
    "Palm Valley": "Palm Valley",
    "Patio El Zahra": "Patio El Zahra",
    "Patio El Zahraa": "Patio El Zahraa",
    "Rock Eden": "Rock Eden",
    "Sodic Westown": "Sodic Westown",
    "Sun Capital": "Sun Capital",
    Tawny: "Tawny",
    "The Axis": "The Axis",
    "The Crown": "The Crown",
    "The Estates": "The Estates",
    Vye: "Vye",
    Westown: "Westown",
    "Wood Ville": "Wood Ville",
    "Zed Towers": "Zed Towers",
    "خيار اخر": " "
  },

  "New Capital City": {
    "Select Compound": " ",
    "Al Maqsad": "Al Maqsad",
    Anakaji: "Anakaji",
    Armonia: "Armonia",
    "Bleu Vert": "Bleu Vert",
    "Board Walk": "Board Walk",
    "Capital Heights": "Capital Heights",
    "Capital Heights 2": "Capital Heights 2",
    "Castle Landdmark": "Castle Landdmark",
    "City Oval": "City Oval",
    "De Joya": "De Joya",
    Entrada: "Entrada",
    "Golden Yard": "Golden Yard",
    "Green Avenue": "Green Avenue",
    "Il Bosco": "Il Bosco",
    "Il Mondo": "Il Mondo",
    Inizio: "Inizio",
    "La Capital": "La Capital",
    "La Verde": "La Verde",
    "La Verde Casette": "La Verde Casette",
    Menorca: "Menorca",
    "Midtown Condo": "Midtown Condo",
    "Midtown Sky": "Midtown Sky",
    Oia: "Oia",
    "Park Lane": "Park Lane",
    Rhodes: "Rhodes",
    Rivan: "Rivan",
    Roses: "Roses",
    Scenario: "Scenario",
    "Scene 7": "Scene 7",
    "Sky Capital": "Sky Capital",
    "Smart Mall": "Smart Mall",
    Sueno: "Sueno",
    "The Capital Way": "The Capital Way",
    "The City Valley": "The City Valley",
    "The Curve": "The Curve",
    "The Loft": "The Loft",
    "Town Gate": "Town Gate",
    Vinci: "Vinci",
    Zavani: "Zavani",
    "Other": " "
  },
};



WoocommerceToMylerzCities = {
  Alexandria: "Alexandria",
  Aswan: "Aswan",
  Asyut: "Asyut",
  "Red Sea": "Red Sea",
  Beheira: "Beheira",
  "Beni Suef": "Beni Suef",
  Cairo: "Cairo",
  Dakahlia: "Dakahlia",
  Damietta: "Damietta",
  Faiyum: "Faiyum",
  Gharbia: "Gharbia",
  Giza: "Giza",
  Ismailia: "Ismailia",
  "South Sinai": "South Sinai",
  Qalyubia: "Qalyubia",
  "Kafr el-Sheikh": "Kafr El Sheikh",
  Qena: "Qena",
  Luxor: "Luxor",
  Minya: "Minya",
  Monufia: "Monufia",
  Matrouh: "Matruh",
  "Port Said": "Port Said",
  Sohag: "Sohag",
  "Al Sharqia": "Sharqia",
  "North Sinai": "North Sinai",
  Suez: "Suez",
  "New Valley": "El Wadi el Gedid",
  "الإسكندرية":"الاسكندرية",
  "أسوان": "أسوان",
  "أسيوط": "أسيوط",
  "البحر الأحمر": "البحر الأحمر",
  "البحيرة": "البحيرة",
  "بني سويف": "بنى سويف",
  "القاهرة": "القاهرة",
  "الدقهلية": "الدقهلية",
  "دمياط": "دمياط",
  "الفيوم": "الفيوم",
  "الغربية": "الغربية",
  "الجيزة": "الجيزة",
  "الإسماعيلية": "الإسماعيلية",
  "جنوب سيناء": "جنوب سيناء",
  "القليوبية": "القليوبية",
  "كفر الشيخ": "كفر الشيخ",
  "قنا": "قنا",
  "الأقصر": "الأقصر",
  "المنيا": "المنيا",
  "المنوفية": "المنوفية",
  "مطروح": "مرسى مطروح",
  "بورسعيد": "بورسعيد",
  "سوهاج": "سوهاج",
  "الشرقية": "الشرقية",
  "شمال سيناء": "شمال سيناء",
  "السويس": "السويس",
  "الوادي الجديد": "الوادى الجديد",
};

GetCityZoneList();

async function GetCityZoneList() {
  let response = await fetch(
    `${config.integration_api}/api/packages/GetCityZoneList`

  );
  let result = await response.json();

  if (!result.IsErrorState) {
    let cityNeighborhoodObject = ProcessApiResponse(result);
    UpdateBillingNeighborhood(cityNeighborhoodObject);
    UpdateShippingNeighborhood(cityNeighborhoodObject);
    UpdateBillingCompound();
    UpdateShippingCompound();

    jQuery("#billing_state").change(function () {
      UpdateBillingNeighborhood(cityNeighborhoodObject);
      UpdateBillingCompound();
    });

    jQuery("#shipping_state").change(function () {
      UpdateShippingNeighborhood(cityNeighborhoodObject);
      UpdateShippingCompound();
    });

    jQuery("#billing_neighborhood").change(function () {
      UpdateBillingCompound();
    });
    jQuery("#shipping_neighborhood").change(function () {
      UpdateShippingCompound();
    });
  }
}

function ProcessApiResponse(result) {
  let cityNeighborhoodObject = {};
  if (!result.IsErrorState) {
    result.Value.forEach((city) => {
      let zoneObject = {};
      let zoneObjectAr = {};
      city["Zones"].forEach((zone) => {
        zoneObject[zone["EnName"]] = zone["Code"];
        zoneObjectAr[zone["ArName"]] = zone["Code"];
      });
      cityNeighborhoodObject[city["EnName"]] = zoneObject;
      cityNeighborhoodObject[city["ArName"]] = zoneObjectAr;
    });
  }

  return cityNeighborhoodObject;
}

function UpdateBillingNeighborhood(cityNeighborhoodObject) {
  let city = jQuery("#billing_state option:selected").text();
  let mylerzCity = WoocommerceToMylerzCities[city];
  let selectedZones = cityNeighborhoodObject[mylerzCity];
  SetBillingNeighborhoodOptions(selectedZones);
}
function UpdateShippingNeighborhood(cityNeighborhoodObject) {
  let city = jQuery("#shipping_state option:selected").text();
  let mylerzCity = WoocommerceToMylerzCities[city];
  let selectedZones = cityNeighborhoodObject[mylerzCity];
  SetShippingNeighborhoodOptions(selectedZones);
}

function UpdateBillingCompound() {
  let neighborhood = jQuery("#billing_neighborhood option:selected").text();
  if (NeighborhoodToCompoundListMapping[neighborhood] == undefined) {
    SetBillingCompoundOptions({});
    jQuery("#billing_compound_field").hide();
  } else {
    SetBillingCompoundOptions(NeighborhoodToCompoundListMapping[neighborhood]);
    jQuery("#billing_compound_field").show();
  }
}
function UpdateShippingCompound() {
  let neighborhood = jQuery("#shipping_neighborhood option:selected").text();
  if (NeighborhoodToCompoundListMapping[neighborhood] == undefined) {
    SetShippingCompoundOptions({});
    jQuery("#shipping_compound_field").hide();
  } else {
    SetShippingCompoundOptions(NeighborhoodToCompoundListMapping[neighborhood]);
    jQuery("#shipping_compound_field").show();
  }
}

function SetBillingNeighborhoodOptions(zones) {
  let el = jQuery("#billing_neighborhood");
  el.empty(); // remove old options
  el.append(jQuery("<option></option>"))
  jQuery.each(zones, function (key, value) {
    el.append(jQuery("<option></option>").attr("value", value).text(key));
  });
}
function SetShippingNeighborhoodOptions(zones) {
  let el = jQuery("#shipping_neighborhood");
  el.empty(); // remove old options
  el.append(jQuery("<option></option>"))
  jQuery.each(zones, function (key, value) {
    el.append(jQuery("<option></option>").attr("value", value).text(key));
  });
}

function SetBillingCompoundOptions(zones) {
  let el = jQuery("#billing_compound");
  el.empty(); // remove old options
  el.append(jQuery("<option></option>"))
  jQuery.each(zones, function (key, value) {
    el.append(jQuery("<option></option>").attr("value", value).text(key));
  });
}
function SetShippingCompoundOptions(zones) {
  let el = jQuery("#shipping_compound");
  el.empty(); // remove old options
  el.append(jQuery("<option></option>"))
  jQuery.each(zones, function (key, value) {
    el.append(jQuery("<option></option>").attr("value", value).text(key));
  });
}
